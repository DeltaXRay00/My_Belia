<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laporan Kursus Baharu - MyBelia</title>
  <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet">
  <link rel="stylesheet" href={~p"/assets/admin.css"} />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
      background-color: #f5f5f5;
      overflow-x: hidden;
    }
    .admin-container {
      display: flex;
      min-height: 100vh;
      width: 100%;
    }
    .government-form {
      background: white;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }
    .form-header {
      background: #1e3a8a;
      color: white;
      padding: 20px 30px;
      border-radius: 8px 8px 0 0;
      text-align: center;
    }
    .form-header h1 {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
    }
    .form-header p {
      margin: 5px 0 0 0;
      font-size: 14px;
      opacity: 0.9;
    }
    .form-body {
      padding: 30px;
    }
    .section {
      margin-bottom: 40px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      overflow: hidden;
    }
    .section-header {
      background: #f8fafc;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e7eb;
      font-weight: 600;
      font-size: 16px;
      color: #374151;
    }
    .section-content {
      padding: 20px;
    }
    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 8px;
    }
    .form-label.required::after {
      content: " *";
      color: #dc2626;
    }
    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
      transition: border-color 0.3s;
    }
    .form-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 14px;
      min-height: 100px;
      resize: vertical;
      box-sizing: border-box;
      transition: border-color 0.3s;
    }
    .form-textarea:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    .form-select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 14px;
      background-color: white;
      box-sizing: border-box;
    }
    .upload-area {
      border: 2px dashed #d1d5db;
      border-radius: 6px;
      padding: 30px 20px;
      text-align: center;
      background: #f9fafb;
      cursor: pointer;
      transition: all 0.3s;
    }
    .upload-area:hover {
      border-color: #2563eb;
      background: #f0f9ff;
    }
    .upload-icon {
      font-size: 32px;
      color: #6b7280;
      margin-bottom: 10px;
    }
    .upload-text {
      color: #6b7280;
      font-size: 14px;
      margin: 0;
    }
    .progress-section {
      background: #f8fafc;
      padding: 20px;
      border-radius: 6px;
      margin: 20px 0;
    }
    .progress-chart {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: conic-gradient(#2563eb 0deg 36deg, #e5e7eb 36deg 360deg);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
      position: relative;
    }
    .progress-chart::before {
      content: "10%";
      position: absolute;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
    }
    .progress-chart::after {
      content: "";
      position: absolute;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: white;
    }
    .form-actions {
      background: #f8fafc;
      padding: 20px 30px;
      border-top: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .btn-primary {
      background: #2563eb;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .btn-primary:hover {
      background: #1d4ed8;
    }
    .btn-secondary {
      background: #6b7280;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .btn-secondary:hover {
      background: #4b5563;
    }
    .pagination {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      gap: 10px;
    }
    .page-btn {
      padding: 10px 16px;
      border: 1px solid #d1d5db;
      background: white;
      color: #374151;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }
    .page-btn.active {
      background: #2563eb;
      color: white;
      border-color: #2563eb;
    }
    .page-btn:hover:not(.active) {
      background: #f3f4f6;
    }
    .page-content {
      display: none;
    }
    .page-content.active {
      display: block;
    }
    .form-note {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 20px;
      font-size: 14px;
      color: #92400e;
    }
    .form-note strong {
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
<.admin_layout current_page="laporan_kursus" page_title="Laporan Kursus Baharu">

    <!-- Government Form -->
    <div class="government-form">
      <!-- Form Header -->
      <div class="form-header">
        <h1>LAPORAN KURSUS</h1>
        <p>KEMENTERIAN BELIA DAN SUKAN MALAYSIA</p>
      </div>

      <!-- Form Body -->
      <div class="form-body">
        <div class="form-note">
          <strong>Nota:</strong>
          Sila isi semua maklumat yang diperlukan. Ruangan yang bertanda (*) adalah wajib diisi.
        </div>

                  <.simple_form :let={f} for={@changeset} action={~p"/laporan_kursus"}>
          <.error :if={@changeset.action}>
            <div class="form-note" style="background: #fee2e2; border-color: #ef4444; color: #991b1b;">
              <strong>Ralat:</strong> Sila semak semula maklumat yang dimasukkan.
            </div>
          </.error>
          
          <!-- Page 1: Maklumat Asas -->
          <div class="page-content active" id="page-1">
            <div class="section">
              <div class="section-header">A. MAKLUMAT ASAS KURSUS</div>
              <div class="section-content">
                <div class="form-row">
                  <div class="form-group">
                    <.input field={f[:title]} type="text" label="Tajuk Kursus" class="form-input" />
                  </div>
                  <div class="form-group">
                    <.input field={f[:implementation_date]} type="date" label="Tarikh Pelaksanaan" class="form-input" />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <.input field={f[:implementation_location]} type="text" label="Tempat Pelaksanaan" class="form-input" />
                  </div>
                  <div class="form-group">
                    <.input field={f[:instructor_name]} type="text" label="Nama Pengajar" class="form-input" />
                  </div>
                </div>
                <div class="form-group">
                  <.input field={f[:report_date]} type="date" label="Tarikh Laporan Disediakan" class="form-input" />
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-header">B. MAKLUMAT PELAKSANAAN</div>
              <div class="section-content">
                <div class="form-row">
                  <div class="form-group">
                    <.input field={f[:start_date]} type="date" label="Tarikh Mula" class="form-input" />
                  </div>
                  <div class="form-group">
                    <.input field={f[:end_date]} type="date" label="Tarikh Tamat" class="form-input" />
                  </div>
                </div>
                <div class="form-group">
                  <.input field={f[:location]} type="text" label="Tempat / Lokasi" class="form-input" />
                </div>
                <div class="form-group">
                  <.input field={f[:brief_course]} type="textarea" label="Atur Cara Ringkas" class="form-textarea" />
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-header">C. STATISTIK PESERTA</div>
              <div class="section-content">
                <div class="form-row">
                  <div class="form-group">
                    <.input field={f[:target_participants]} type="number" label="Jumlah Sasaran Peserta" class="form-input" />
                  </div>
                  <div class="form-group">
                    <.input field={f[:actual_participants]} type="number" label="Jumlah Peserta Sebenar" class="form-input" />
                  </div>
                </div>
                <div class="progress-section">
                  <div class="progress-chart"></div>
                  <p style="text-align: center; margin: 0; color: #6b7280; font-size: 14px;">Peratusan Pencapaian Sasaran</p>
                </div>
                <div class="form-group">
                  <.input field={f[:invited_guests]} type="number" label="Tetamu Jemputan" class="form-input" />
                </div>
              </div>
            </div>
          </div>

          <!-- Page 2: Ringkasan & Objektif -->
          <div class="page-content" id="page-2">
            <div class="section">
              <div class="section-header">D. RINGKASAN EKSEKUTIF</div>
              <div class="section-content">
                <div class="form-group">
                  <label class="form-label">Gambar Ringkasan</label>
                  <div class="upload-area">
                    <div class="upload-icon">🏔️</div>
                    <p class="upload-text">Klik untuk memuat naik gambar ringkasan</p>
                    <input type="file" accept="image/*" style="display: none;" />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <.input field={f[:implementing_committee]} type="text" label="AJK Pelaksana" class="form-input" />
                  </div>
                  <div class="form-group">
                    <.input field={f[:sponsor]} type="text" label="Penaja" class="form-input" />
                  </div>
                </div>
                <div class="form-group">
                  <.input field={f[:objective_summary]} type="textarea" label="Rumusan Pencapaian Objektif" class="form-textarea" />
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-header">E. LATAR BELAKANG & OBJEKTIF</div>
              <div class="section-content">
                <div class="form-group">
                  <.input field={f[:background]} type="textarea" label="Latar Belakang" class="form-textarea" />
                </div>
                <div class="form-group">
                  <.input field={f[:original_objective]} type="textarea" label="Objektif Asal" class="form-textarea" />
                </div>
                <div class="form-group">
                  <.input field={f[:additional_objective]} type="text" label="Objektif Tambahan" class="form-input" />
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-header">F. PENCAPAIAN & PENILAIAN</div>
              <div class="section-content">
                <div class="form-group">
                  <.input field={f[:achievement_evaluation]} type="textarea" label="Pencapaian & Penilaian" class="form-textarea" />
                </div>
                <div class="form-group">
                  <.input field={f[:participant_feedback]} type="textarea" label="Dapatan Maklum Balas Peserta" class="form-textarea" />
                </div>
              </div>
            </div>
          </div>

          <!-- Page 3: Isu & Kewangan -->
          <div class="page-content" id="page-3">
            <div class="section">
              <div class="section-header">G. ISU & CABARAN</div>
              <div class="section-content">
                <div class="form-group">
                  <.input field={f[:issues_challenges]} type="textarea" label="Isu & Cabaran" class="form-textarea" />
                </div>
                <div class="form-group">
                  <.input field={f[:improvement_suggestions]} type="textarea" label="Cadangan Penambahbaikan" class="form-textarea" />
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-header">H. KEWANGAN</div>
              <div class="section-content">
                <div class="form-group">
                  <label class="form-label">Laporan Kewangan</label>
                  <div class="upload-area">
                    <div class="upload-icon">📊</div>
                    <p class="upload-text">Klik untuk memuat naik laporan kewangan</p>
                    <input type="file" accept=".pdf,.doc,.docx" style="display: none;" />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <.input field={f[:target_budget]} type="number" label="Jumlah Sasaran Bajet (RM)" class="form-input" />
                  </div>
                  <div class="form-group">
                    <.input field={f[:actual_budget]} type="number" label="Jumlah Bajet Sebenar (RM)" class="form-input" />
                  </div>
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-header">I. RUMUSAN & DOKUMENTASI</div>
              <div class="section-content">
                <div class="form-group">
                  <.input field={f[:summary]} type="textarea" label="Rumusan" class="form-textarea" />
                </div>
                <div class="form-group">
                  <.input field={f[:additional_info]} type="textarea" label="Maklumat Tambahan" class="form-textarea" />
                </div>
                <div class="form-group">
                  <label class="form-label">Dokumentasi Akhir</label>
                  <div class="upload-area">
                    <div class="upload-icon">📋</div>
                    <p class="upload-text">Klik untuk memuat naik dokumen akhir</p>
                    <input type="file" multiple style="display: none;" />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Pagination -->
          <div class="pagination">
            <button type="button" class="page-btn active" onclick="showPage(1)">Halaman 1</button>
            <button type="button" class="page-btn" onclick="showPage(2)">Halaman 2</button>
            <button type="button" class="page-btn" onclick="showPage(3)">Halaman 3</button>
          </div>
        </.simple_form>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
                    <.link href={~p"/laporan_kursus"}>
          <button type="button" class="btn-secondary">Kembali</button>
        </.link>
        <.button class="btn-primary">Simpan Laporan</.button>
      </div>
    </div>
</.admin_layout>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Get all dropdown toggles
  const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
  
  // Add click event listener to each dropdown toggle
  dropdownToggles.forEach(toggle => {
    toggle.addEventListener('click', function(e) {
      e.preventDefault();
      
      // Get the dropdown menu ID from data attribute
      const dropdownId = this.getAttribute('data-dropdown');
      const dropdownMenu = document.getElementById(dropdownId);
      
      // Toggle active class on the toggle button
      this.classList.toggle('active');
      
      // Toggle show class on the dropdown menu
      dropdownMenu.classList.toggle('show');
    });
  });

  // Hamburger menu toggle functionality
  const menuToggle = document.getElementById('menu-toggle');
  const sidebar = document.querySelector('.sidebar');
  const mainContent = document.querySelector('.main-content');
  
  menuToggle.addEventListener('click', function() {
    sidebar.classList.toggle('hidden');
    mainContent.classList.toggle('sidebar-hidden');
  });

  // Pagination functionality
  window.showPage = function(pageNum) {
    // Hide all pages
    document.querySelectorAll('.page-content').forEach(page => {
      page.classList.remove('active');
    });
    
    // Show selected page
    document.getElementById('page-' + pageNum).classList.add('active');
    
    // Update pagination buttons
    document.querySelectorAll('.page-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.classList.add('active');
  };

  // File upload functionality
  document.querySelectorAll('.upload-area').forEach(area => {
    area.addEventListener('click', function() {
      const input = this.querySelector('input[type="file"]');
      input.click();
    });
    
    area.addEventListener('dragover', function(e) {
      e.preventDefault();
      this.style.borderColor = '#2563eb';
      this.style.background = '#f0f9ff';
    });
    
    area.addEventListener('dragleave', function(e) {
      e.preventDefault();
      this.style.borderColor = '#d1d5db';
      this.style.background = '#f9fafb';
    });
    
    area.addEventListener('drop', function(e) {
      e.preventDefault();
      this.style.borderColor = '#d1d5db';
      this.style.background = '#f9fafb';
      const files = e.dataTransfer.files;
      const input = this.querySelector('input[type="file"]');
      input.files = files;
    });
  });
});
</script>
</body>
</html> 